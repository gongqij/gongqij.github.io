<!doctype html><html lang=en>
<head>
<meta name=generator content="Hugo 0.89.4">
<title>
K:)eep
</title>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content>
<meta name=keywords content>
<meta name=robots content="noodp">
<link rel=canonical href=/>
<link rel=stylesheet href=/assets/style.css>
<link rel=stylesheet href=/style.css>
<link rel=apple-touch-icon-precomposed sizes=144x144 href=/img/apple-touch-icon-144-precomposed.png>
<link rel="shortcut icon" href=/favicon.png>
<link href=/assets/fonts/Inter-Italic.woff2 rel=preload type=font/woff2 as=font crossorigin>
<link href=/assets/fonts/Inter-Regular.woff2 rel=preload type=font/woff2 as=font crossorigin>
<link href=/assets/fonts/Inter-Medium.woff2 rel=preload type=font/woff2 as=font crossorigin>
<link href=/assets/fonts/Inter-MediumItalic.woff2 rel=preload type=font/woff2 as=font crossorigin>
<link href=/assets/fonts/Inter-Bold.woff2 rel=preload type=font/woff2 as=font crossorigin>
<link href=/assets/fonts/Inter-BoldItalic.woff2 rel=preload type=font/woff2 as=font crossorigin>
<meta name=twitter:card content="summary">
<meta name=twitter:title content="K:)eep">
<meta name=twitter:description content>
<meta property="og:title" content="K:)eep">
<meta property="og:description" content>
<meta property="og:type" content="website">
<meta property="og:url" content="/"><meta property="og:site_name" content="K:)eep">
<link rel=alternate type=application/rss+xml href=/index.xml title=K:)eep>
</head>
<body>
<div class=container>
<header class=header>
<span class=header__inner>
<a href=/ class=logo style=text-decoration:none>
<span class=logo__text>K:)eep</span>
</a>
<span class=header__right>
<nav class=menu>
<ul class="menu__inner menu__inner--desktop">
<li><a href=https://github.com/gongqij>Github</a></li>
<li><a href=/>Home</a></li>
<li><a href=/posts/readlist>ReadList</a></li>
<li><a href=/posts/wechat>WeChat</a></li>
</ul>
<ul class="menu__inner menu__inner--mobile">
<li><a href=https://github.com/gongqij>Github</a></li>
<li><a href=/>Home</a></li>
<li><a href=/posts/readlist>ReadList</a></li>
<li><a href=/posts/wechat>WeChat</a></li>
</ul>
</nav>
<span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
</span>
<span class=theme-toggle><svg style="width:24px;height:24px" viewBox="0 0 24 24"><path fill="currentcolor" d="M12 6a6 6 0 016 6c0 2.22-1.21 4.16-3 5.2V19a1 1 0 01-1 1H10A1 1 0 019 19V17.2C7.21 16.16 6 14.22 6 12a6 6 0 016-6m2 15v1a1 1 0 01-1 1H11a1 1 0 01-1-1V21h4m6-10h3v2H20V11M1 11H4v2H1V11M13 1V4H11V1h2M4.92 3.5 7.05 5.64 5.63 7.05 3.5 4.93 4.92 3.5M16.95 5.63 19.07 3.5 20.5 4.93 18.37 7.05 16.95 5.63z"/></svg>
</span>
</span>
</span>
</header>
<div class=content>
<div class=posts>
<div class="post on-list">
<h1 class=post-title><a href=/posts/rust%E5%AD%A6%E4%B9%A0/>Rust学习</a></h1>
<div class=post-meta style=color:#999>
<span class=post-date>
2021-12-01
</span>
<span class=post-read-time>· 7 min read</span>
</div>
<div class=post-content>
Rust 静态类型语言 Rust是静态类型语言，在编译时就必须知道所有变量的类型。
动态语言是指运行期间可以改变其结构的语言：例如增加或者删除函数、对象、甚至代码。比如JavaScript、Objective-C、Ruby、Python等，而C、C++等语言则不属于动态语言。静态语言与动态语言相反，在运行时不能改变其结构。尽管静态语言可以通过复杂的手段实现动态语言的特性，但是动态语言提供了直接的方法实现语言的动态性。
动态类型语言是指在运行期间才去做数据类型检查的语言。在用动态语言编程时，不用给变量指定数据类型，第一次赋值给变量时，在内部将数据类型记录下来。JavaScript、Ruby、Python是典型的动态类型语言。静态类型语言与动态类型语言刚好相反，它的数据类型检查发生在在编译阶段，也就是说在写程序时要声明变量的数据类型。C/C++、C#、Java都是静态类型语言的典型代表。
大部分动态语言是动态类型的，但是不是所有都是。
一、依赖管理&ndash;cargo source 默认路径 ～/.cargo/config
[source.crates-io] registry = &ldquo;https://github.com/rust-lang/crates.io-index" replace-with = &lsquo;ustc&rsquo; [source.ustc] registry = &ldquo;git://mirrors.ustc.edu.cn/crates.io-index&rdquo;
cargo.lock cargo.lock相当于依赖锁，除非在cargo.toml中手动指定了其他依赖版本，否则编译时依赖版本始终保持不变，即项目构建可重现
cargo update cargo update会忽略cargo.lock，并计算出所有符合 Cargo.toml 声明的最新版本。如果成功了，Cargo 会把这些版本写入 Cargo.lock 文件。
注意：（当前版本0.5.5）
Cargo 默认只会寻找大于 0.5.5 而小于 0.6.0 的版本。如果 rand crate 发布了两个新版本，0.5.6 和 0.6.0，会更新到0.5.6，如果想要使用 0.6.0 版本的 rand 或是任何 0.6.x 系列的版本，需要修改cargo.toml
cargo doc &ndash;open 以文档形式查看本地项目的所有依赖
Rust 有一个静态强类型系统，同时也有类型推断 整数类型的变量默认为i32，不能和string类型进行比较，但是可以和u32类型作比较（rust的类型推断）
二、数据类型 常量 例如：const MAX_POINTS: u32 = 100_000;
</div>
<div>
<a class="read-more button" style=color:#1e90ff href=/posts/rust%E5%AD%A6%E4%B9%A0/>▶️ Read more</a>
<span class=post-author style=text-align:right;color:#999;display:inline-block;width:80%> By :</span>
<a style=font-weight:700> gq </a>
</div>
</div>
<div class="post on-list">
<h1 class=post-title><a href=/posts/channel/>go之channel</a></h1>
<div class=post-meta style=color:#999>
<span class=post-date>
2021-11-30
</span>
<span class=post-read-time>· 17 min read</span>
</div>
<div class=post-content>
channel channel的作用 goroutine之间安全通信
hchan mutex
goroutine之间数据传递
FIFO语义
copying into and out of hchan buffer
先从 Channel 读取数据的 Goroutine 会先接收到数据； 先向 Channel 发送数据的 Goroutine 会得到先发送数据的权利； 可以使得goroutine阻塞和唤醒
hchan sudog queues
calls into the runtime scheduler(gopark, goready)
设计原理 ​ 多线程使用共享内存传递数据
​ Goroutine 使用 Channel 传递数据
先入先出 目前的 Channel 收发操作均遵循了先入先出（FIFO）的设计，具体规则如下：
先从 Channel 读取数据的 Goroutine 会先接收到数据； 先向 Channel 发送数据的 Goroutine 会得到先发送数据的权利； 数据结构 Channel 在运行时的内部表示是 runtime.
</div>
<div>
<a class="read-more button" style=color:#1e90ff href=/posts/channel/>▶️ Read more</a>
<span class=post-author style=text-align:right;color:#999;display:inline-block;width:80%> By :</span>
<a style=font-weight:700> gq </a>
</div>
</div>
<div class="post on-list">
<h1 class=post-title><a href=/posts/go%E4%B9%8B%E5%90%8C%E6%AD%A5%E5%8E%9F%E8%AF%AD%E4%B8%8E%E9%94%81/>go之同步原语</a></h1>
<div class=post-meta style=color:#999>
<span class=post-date>
2021-11-29
</span>
<span class=post-read-time>· 6 min read</span>
</div>
<div class=post-content>
同步原语与锁 Mutex 数据结构 type Mutex struct { state int32 //表示当前互斥锁的状态 sema uint32 //用于控制锁状态的信号量 } 互斥锁的状态 互斥锁的状态比较复杂，如下图所示，最低三位分别表示 mutexLocked、mutexWoken 和 mutexStarving，剩下的位置用来表示当前有多少个 Goroutine 等待互斥锁的释放：
图 6-6 互斥锁的状态
在默认情况下，互斥锁的所有状态位都是 0，int32 中的不同位分别表示了不同的状态：
mutexLocked — 表示互斥锁的锁定状态； mutexWoken — 表示从正常模式被从唤醒； mutexStarving — 当前的互斥锁进入饥饿状态； 互斥锁的正常模式和饥饿模式 sync.Mutex 有两种模式 — 正常模式和饥饿模式。我们需要在这里先了解正常模式和饥饿模式都是什么，它们有什么样的关系。
在正常模式下，锁的等待者会按照先进先出的顺序获取锁。但是刚被唤起的 Goroutine 与新创建的 Goroutine 竞争时，大概率会获取不到锁，为了减少这种情况的出现，一旦 Goroutine 超过 1ms 没有获取到锁，它就会将当前互斥锁切换饥饿模式，防止部分 Goroutine 被『饿死』。
图 6-7 互斥锁的正常模式与饥饿模式
饥饿模式是在 Go 语言 1.9 版本引入的优化1，引入的目的是保证互斥锁的公平性（Fairness）。
在饥饿模式中，互斥锁会直接交给等待队列最前面的 Goroutine。新的 Goroutine 在该状态下不能获取锁、也不会进入自旋状态，它们只会在队列的末尾等待。如果一个 Goroutine 获得了互斥锁并且它在队列的末尾或者它等待的时间少于 1ms，那么当前的互斥锁就会被切换回正常模式。
</div>
<div>
<a class="read-more button" style=color:#1e90ff href=/posts/go%E4%B9%8B%E5%90%8C%E6%AD%A5%E5%8E%9F%E8%AF%AD%E4%B8%8E%E9%94%81/>▶️ Read more</a>
<span class=post-author style=text-align:right;color:#999;display:inline-block;width:80%> By :</span>
<a style=font-weight:700> gq </a>
</div>
</div>
<div class="post on-list">
<h1 class=post-title><a href=/posts/linux%E7%9B%B8%E5%85%B3%E6%8C%87%E4%BB%A4/>linux相关指令</a></h1>
<div class=post-meta style=color:#999>
<span class=post-date>
2021-11-29
</span>
<span class=post-read-time>· 4 min read</span>
</div>
<div class=post-content>
Ubuntu命令大全 apt-get apt-get update:更新安装列表 apt-get upgrade:升级软件 apt-get install software_name :安装软件 apt-get &ndash;purge remove software_name :卸载软件及其配置 apt-get autoremove software_name:卸载软件及其依赖的安装包
罗列已安装软件 dpkg &ndash;list
//安装.debtmpfs 7.8G 133M 7.7G 2% /tmp /dev/sda 1.8T 155G 1.6T 9% /home/gongqi/MountFiles /dev/sdb1 300M 280K 300M 1% /boot/efi /dev/loop1 32M 32M 0 100% /var/lib/snapd/snap/snapd/10707
​ sudo dpkg -i &lt;package.deb>
sudo uname -m
查看Ubuntu系统的位数
界面切换 ctrl+alt+f2 //命令行界面
ctrl+alt+f7 // 图形界面
查看帮助 &ndash;help
</div>
<div>
<a class="read-more button" style=color:#1e90ff href=/posts/linux%E7%9B%B8%E5%85%B3%E6%8C%87%E4%BB%A4/>▶️ Read more</a>
<span class=post-author style=text-align:right;color:#999;display:inline-block;width:80%> By :</span>
<a style=font-weight:700> gq </a>
</div>
</div>
<div class="post on-list">
<h1 class=post-title><a href=/posts/my-first-post/>My First Post</a></h1>
<div class=post-meta style=color:#999>
<span class=post-date>
2021-11-29
</span>
<span class=post-read-time>· 1 min read</span>
</div>
<div class=post-content>
</div>
<div>
<a class="read-more button" style=color:#1e90ff href=/posts/my-first-post/>▶️ Read more</a>
<span class=post-author style=text-align:right;color:#999;display:inline-block;width:80%> By :</span>
<a style=font-weight:700> gq </a>
</div>
</div>
<div class=pagination>
<div class=pagination__buttons>
</div>
</div>
<script>localStorage.getItem('theme')=='dark'&&document.documentElement.classList.add('dark-mode')</script>
<div id=light-mode>
<script src=https://utteranc.es/client.js repo=gongqij/blog_comment issue-term=title theme=github-light crossorigin=anonymous async></script>
</div>
<div id=dark-mode>
<script src=https://utteranc.es/client.js repo=gongqij/blog_comment issue-term=title theme=github-dark crossorigin=anonymous async></script>
</div>
<script>var root=document.getElementsByClassName("dark-mode");root.length>0?(document.getElementById("light-mode").style.display="none",document.getElementById("dark-mode").style.display="block"):(document.getElementById("light-mode").style.display="block",document.getElementById("dark-mode").style.display="none")</script>
</div>
</div>
<footer class=footer>
<div class=footer__inner>
<a href=/ class=logo style=text-decoration:none>
<span class=logo__text>K:)eep</span>
</a>
<div class=copyright>
<span>© 2021 Powered by
<a href=https://gohugo.io target=_blank rel=noopener>Hugo</a></span>
</div>
</div>
</footer>
<script src=/assets/main.js></script>
<script src=/assets/prism.js></script>
</div>
</body>
</html>